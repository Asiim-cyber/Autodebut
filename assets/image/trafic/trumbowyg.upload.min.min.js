!function(i){"use strict";function u(r,e){var a=e.shift();if(null!==r){if(0===e.length)return r[a];if("object"==typeof r)return u(r[a],e)}return r}var a,r={serverPath:"",fileFieldName:"fileToUpload",data:[],headers:{},xhrFields:{},urlPropertyName:"file",statusPropertyName:"success",success:void 0,error:void 0,imageWidthModalEdit:!1};i.trumbowyg.addedXhrProgressEvent||(a=i.ajaxSettings.xhr,i.ajaxSetup({xhr:function(){var r=a(),e=this;return r&&"object"==typeof r.upload&&void 0!==e.progressUpload&&r.upload.addEventListener("progress",function(r){e.progressUpload(r)},!1),r}}),i.trumbowyg.addedXhrProgressEvent=!0),i.extend(!0,i.trumbowyg,{langs:{en:{upload:"Upload",file:"File",uploadError:"Error"},sk:{upload:"Nahrať",file:"Súbor",uploadError:"Chyba"},fr:{upload:"Envoi",file:"Fichier",uploadError:"Erreur"},cs:{upload:"Nahrát obrázek",file:"Soubor",uploadError:"Chyba"},zh_cn:{upload:"上传",file:"文件",uploadError:"错误"},zh_tw:{upload:"上傳",file:"文件",uploadError:"錯誤"},ru:{upload:"Загрузка",file:"Файл",uploadError:"Ошибка"},ja:{upload:"アップロード",file:"ファイル",uploadError:"エラー"},pt_br:{upload:"Enviar do local",file:"Arquivo",uploadError:"Erro"},tr:{upload:"Yükle",file:"Dosya",uploadError:"Hata"}},plugins:{upload:{init:function(d){d.o.plugins.upload=i.extend(!0,{},r,d.o.plugins.upload||{}),d.addBtnDef("upload",{fn:function(){d.saveRange();var l,e=d.o.prefix,r={file:{type:"file",required:!0,attributes:{accept:"image/*"}},alt:{label:"description",value:d.getRangeText()}},t=(d.o.plugins.upload.imageWidthModalEdit&&(r.width={value:""}),d.openModalInsert(d.lang.upload,r,function(o){var a=new FormData;a.append(d.o.plugins.upload.fileFieldName,l),d.o.plugins.upload.data.map(function(r){a.append(r.name,r.value)}),i.map(o,function(r,e){"file"!==e&&a.append(e,r)}),0===i("."+e+"progress",t).length&&i("."+e+"modal-title",t).after(i("<div/>",{class:e+"progress"}).append(i("<div/>",{class:e+"progress-bar"}))),i.ajax({url:d.o.plugins.upload.serverPath,headers:d.o.plugins.upload.headers,xhrFields:d.o.plugins.upload.xhrFields,type:"POST",data:a,cache:!1,dataType:"json",processData:!1,contentType:!1,progressUpload:function(r){i("."+e+"progress-bar").css("width",Math.round(100*r.loaded/r.total)+"%")},success:function(r){var e,a;d.o.plugins.upload.success?d.o.plugins.upload.success(r,d,t,o):u(r,d.o.plugins.upload.statusPropertyName.split("."))?(e=u(r,d.o.plugins.upload.urlPropertyName.split(".")),d.execCmd("insertImage",e),(a=i('img[src="'+e+'"]:not([alt])',d.$box)).attr("alt",o.alt),d.o.imageWidthModalEdit&&0<parseInt(o.width)&&a.attr({width:o.width}),setTimeout(function(){d.closeModal()},250),d.$c.trigger("tbwuploadsuccess",[d,r,e])):(d.addErrorOnModalField(i("input[type=file]",t),d.lang[r.message]),d.$c.trigger("tbwuploaderror",[d,r]))},error:d.o.plugins.upload.error||function(){d.addErrorOnModalField(i("input[type=file]",t),d.lang.uploadError),d.$c.trigger("tbwuploaderror",[d])}})}));i("input[type=file]").on("change",function(e){try{l=e.target.files[0]}catch(r){l=e.target.value}})}})}}}})}(jQuery);